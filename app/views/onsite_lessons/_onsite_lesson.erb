<% cache onsite_lesson.at(location) do %>
  <div class="onsite-lesson <%= cycle 'odd', 'even', name: "onsite_course_#{onsite_lesson.onsite_course_id}" %>">
    <div class="lesson-header">
      <div class="left">
        <div class="left">
          <a data-toggle="collapse" href="#lesson_<%= onsite_lesson.id %>_location_<%= location.id %>"><p><%= onsite_lesson.title %><% if onsite_lesson.at(location).date %> <small><%= onsite_lesson.at(location).date.strftime("%m/%d %I:%M %p") %></small><% end %></p></a>
        </div>
      </div>
      <div class="right">
        <p style="float: left; margin-right: 10px;"><small><%= number_to_currency(onsite_lesson.price) %></small></p>
        <%= add_to_cart(onsite_lesson) %>
      </div>
    </div>
    <div class="clear"></div>
    <div class="lesson-body collapse" id="lesson_<%= onsite_lesson.id %>_location_<%= location.id %>">
      <div class="lesson-inner">
        <%= markdown(onsite_lesson.description) %>
      </div>
    </div>
  </div>
  <div class="clear"></div>
<% end %>